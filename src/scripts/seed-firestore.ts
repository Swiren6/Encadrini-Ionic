import { initializeApp } from 'firebase/app';
import { getFirestore, collection, addDoc, setDoc, doc } from 'firebase/firestore';

// Configuration Firebase
const firebaseConfig = {
  apiKey: "AIzaSyDukgjfPkaGlDTbgeaeh0NCSgWwp_7QrLA",
  authDomain: "encadrini-42c37.firebaseapp.com",
  projectId: "encadrini-42c37",
  storageBucket: "encadrini-42c37.firebasestorage.app",
  messagingSenderId: "366974741617",
  appId: "1:366974741617:web:01114de0d611931e03bfd0"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Donn√©es des professeurs
const professors = [
  {
    id: 'prof001',
    Fullname: 'Dr. Mohamed Ali',
    email: 'mohamed.ali@iset.tn',
    specialization: 'Data Science et Machine Learning',
    available: true,
    maxStudents: 5,
    remarks: 'Expert en analyse de donn√©es avec 10 ans d\'exp√©rience. Sp√©cialis√© en Python, TensorFlow et applications big data. Publications dans des revues internationales.'
  },
  {
    id: 'prof002',
    Fullname: 'Dr. Fatma Ben Ahmed',
    email: 'fatma.benahmed@iset.tn',
    specialization: 'Intelligence Artificielle',
    available: true,
    maxStudents: 4,
    remarks: 'Docteur en IA, sp√©cialiste des r√©seaux de neurones profonds et du traitement du langage naturel. Ancienne chercheuse chez Google AI.'
  },
  {
    id: 'prof003',
    Fullname: 'Dr. Ahmed Trabelsi',
    email: 'ahmed.trabelsi@iset.tn',
    specialization: 'G√©nie Logiciel',
    available: true,
    maxStudents: 6,
    remarks: 'Architecte logiciel senior. Expert en architectures microservices, DevOps et m√©thodologies agiles. Certifi√© AWS et Azure.'
  },
  {
    id: 'prof004',
    Fullname: 'Dr. Samia Bouazizi',
    email: 'samia.bouazizi@iset.tn',
    specialization: 'S√©curit√© Informatique',
    available: false,
    maxStudents: 3,
    remarks: 'Expert en cybers√©curit√©, cryptographie et s√©curit√© des r√©seaux. Certifi√©e CISSP et CEH. Actuellement en cong√© de recherche.'
  },
  {
    id: 'prof005',
    Fullname: 'Dr. Karim Gharbi',
    email: 'karim.gharbi@iset.tn',
    specialization: 'D√©veloppement Mobile',
    available: true,
    maxStudents: 5,
    remarks: 'Sp√©cialiste iOS et Android. Expert Flutter, React Native et Ionic. D√©veloppeur d\'applications avec plus de 50 apps publi√©es.'
  },
  {
    id: 'prof006',
    Fullname: 'Dr. Leila Mansouri',
    email: 'leila.mansouri@iset.tn',
    specialization: 'Blockchain et Cryptomonnaies',
    available: true,
    maxStudents: 3,
    remarks: 'Pionni√®re en technologie blockchain en Tunisie. Expert en smart contracts, Ethereum et applications DeFi.'
  },
  {
    id: 'prof007',
    Fullname: 'Dr. Hichem Zarrouk',
    email: 'hichem.zarrouk@iset.tn',
    specialization: 'Cloud Computing',
    available: true,
    maxStudents: 4,
    remarks: 'Expert en infrastructure cloud, Kubernetes et solutions serverless. Formateur certifi√© AWS et Google Cloud.'
  },
  {
    id: 'prof008',
    Fullname: 'Dr. Sonia Khelifi',
    email: 'sonia.khelifi@iset.tn',
    specialization: 'UX/UI Design',
    available: false,
    maxStudents: 4,
    remarks: 'Designer d\'exp√©rience utilisateur avec 8 ans d\'exp√©rience. Sp√©cialis√©e en design thinking et prototypage.'
  },
  {
    id: 'prof009',
    Fullname: 'Dr. Sirine Abdelkhalek',
    email: 'abdelkhaleksirinette6@gmail.com',
    specialization: 'Cloud Computing',
    available: true,
    maxStudents: 3,
    remarks: 'Expert en infrastructure cloud, Kubernetes et solutions serverless. Formateur certifi√© AWS et Google Cloud.'
  }
];

// Donn√©es des demandes
const requests = [
  {
    studentId: 'student001',
    studentName: 'Ahmed Ben Salem',
    professorId: 'prof001',
    professorName: 'Dr. Mohamed Ali',
    projectTitle: 'Syst√®me de Recommandation E-commerce',
    description: 'D√©veloppement d\'un syst√®me de recommandation de produits utilisant le machine learning. Le projet vise √† analyser le comportement des utilisateurs sur une plateforme e-commerce pour sugg√©rer des produits pertinents. Technologies envisag√©es : Python, TensorFlow, algorithmes collaboratifs.',
    status: 'pending',
    date: new Date('2025-10-20T09:30:00').toISOString()
  },
  {
    studentId: 'student002',
    studentName: 'Fatima Gharbi',
    professorId: 'prof002',
    professorName: 'Dr. Fatma Ben Ahmed',
    projectTitle: 'Chatbot Intelligent pour Service Client',
    description: 'Cr√©ation d\'un chatbot bas√© sur l\'IA pour automatiser les r√©ponses du service client. Utilisation du traitement du langage naturel (NLP) pour comprendre les requ√™tes clients. Technologies : Python, NLTK, TensorFlow, API REST.',
    status: 'accepted',
    date: new Date('2025-10-18T14:15:00').toISOString()
  },
  {
    studentId: 'student003',
    studentName: 'Youssef Mansouri',
    professorId: 'prof003',
    professorName: 'Dr. Ahmed Trabelsi',
    projectTitle: 'Plateforme de Gestion de Projets Agile',
    description: 'Application web collaborative pour la gestion de projets avec m√©thodologie Scrum. Fonctionnalit√©s : kanban board, sprint planning, burndown charts. Stack : Angular, Node.js, MongoDB, int√©gration CI/CD avec GitLab.',
    status: 'pending',
    date: new Date('2025-10-22T10:00:00').toISOString()
  },
  {
    studentId: 'student004',
    studentName: 'Salma Ben Ali',
    professorId: 'prof001',
    professorName: 'Dr. Mohamed Ali',
    projectTitle: 'Analyse Pr√©dictive des Ventes',
    description: 'Syst√®me d\'analyse pr√©dictive utilisant des algorithmes de machine learning pour pr√©voir les tendances de ventes. Analyse de s√©ries temporelles, d√©tection d\'anomalies. Technologies : Python, Pandas, Scikit-learn, visualisation avec Plotly.',
    status: 'rejected',
    date: new Date('2025-10-15T11:20:00').toISOString()
  },
  {
    studentId: 'student005',
    studentName: 'Mehdi Kraiem',
    professorId: 'prof005',
    professorName: 'Dr. Karim Gharbi',
    projectTitle: 'Application Mobile de Fitness',
    description: 'Application mobile cross-platform pour le suivi d\'activit√©s sportives. Fonctionnalit√©s : tracking GPS, plans d\'entra√Ænement personnalis√©s, synchronisation cloud, gamification. Technologies : Flutter, Firebase, int√©gration Google Fit et Apple HealthKit.',
    status: 'accepted',
    date: new Date('2025-10-19T15:45:00').toISOString()
  },
  {
    studentId: 'student006',
    studentName: 'Ines Hamdi',
    professorId: 'prof006',
    professorName: 'Dr. Leila Mansouri',
    projectTitle: 'Plateforme de Vote √âlectronique Blockchain',
    description: 'Syst√®me de vote √©lectronique s√©curis√© utilisant la technologie blockchain. Garantir la transparence, l\'anonymat et l\'immuabilit√© des votes. Technologies : Ethereum, Solidity, Web3.js, React.',
    status: 'pending',
    date: new Date('2025-10-21T08:30:00').toISOString()
  },
  {
    studentId: 'student007',
    studentName: 'Malek Sassi',
    professorId: 'prof007',
    professorName: 'Dr. Hichem Zarrouk',
    projectTitle: 'Infrastructure Cloud pour Startup',
    description: 'Conception et d√©ploiement d\'une infrastructure cloud scalable pour une startup. Architecture microservices, conteneurisation Docker, orchestration Kubernetes, CI/CD automatis√©. Cloud provider : AWS ou Google Cloud.',
    status: 'accepted',
    date: new Date('2025-10-17T13:00:00').toISOString()
  },
  {
    studentId: 'student008',
    studentName: 'Rim Abidi',
    professorId: 'prof003',
    professorName: 'Dr. Ahmed Trabelsi',
    projectTitle: 'API RESTful pour Application Mobile',
    description: 'D√©veloppement d\'une API RESTful robuste et s√©curis√©e pour une application mobile. Authentification JWT, rate limiting, documentation Swagger. Technologies : Node.js, Express, PostgreSQL, Redis pour le caching.',
    status: 'pending',
    date: new Date('2025-10-23T09:15:00').toISOString()
  },
  {
    studentId: 'student009',
    studentName: 'Omar Bouzid',
    professorId: 'prof002',
    professorName: 'Dr. Fatma Ben Ahmed',
    projectTitle: 'Syst√®me de D√©tection de Fraude',
    description: 'Syst√®me intelligent de d√©tection de transactions frauduleuses en temps r√©el. Utilisation d\'algorithmes de machine learning supervis√©s et non supervis√©s. Technologies : Python, Scikit-learn, Apache Kafka pour le streaming.',
    status: 'rejected',
    date: new Date('2025-10-16T14:30:00').toISOString()
  },
  {
    studentId: 'student010',
    studentName: 'Amira Jebali',
    professorId: 'prof005',
    professorName: 'Dr. Karim Gharbi',
    projectTitle: 'Application de R√©alit√© Augment√©e',
    description: 'Application mobile utilisant la r√©alit√© augment√©e pour l\'√©ducation. Visualisation 3D d\'objets, interactions immersives. Technologies : Unity, ARCore/ARKit, C#, mod√©lisation 3D avec Blender.',
    status: 'pending',
    date: new Date('2025-10-24T10:45:00').toISOString()
  }
];

/**
 * Fonction principale de seeding
 */
async function seedDatabase() {
  try {
    console.log('üå± D√©but du seeding de la base de donn√©es Firestore...\n');

    // Ajouter les professeurs
    console.log('üìö Ajout des professeurs dans la collection "professors"...');
    let profCount = 0;
    for (const prof of professors) {
      await setDoc(doc(db, 'professors', prof.id), prof);
      profCount++;
      console.log(`   ‚úÖ ${profCount}/${professors.length} - ${prof.Fullname} (${prof.specialization})`);
    }
    console.log(`\n‚ú® ${profCount} professeurs ajout√©s avec succ√®s !\n`);

    // Ajouter les demandes
    console.log('üìù Ajout des demandes dans la collection "requests"...');
    let reqCount = 0;
    for (const request of requests) {
      await addDoc(collection(db, 'requests'), request);
      reqCount++;
      console.log(`   ‚úÖ ${reqCount}/${requests.length} - ${request.projectTitle} (${request.status})`);
    }
    console.log(`\n‚ú® ${reqCount} demandes ajout√©es avec succ√®s !\n`);

    // R√©sum√©
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
    console.log('üéâ SEEDING TERMIN√â AVEC SUCC√àS !');
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
    console.log(`üìä R√©sum√© :`);
    console.log(`   ‚Ä¢ Professeurs : ${profCount}`);
    console.log(`   ‚Ä¢ Demandes : ${reqCount}`);
    console.log(`   ‚Ä¢ Statut des demandes :`);
    console.log(`     - En attente : ${requests.filter(r => r.status === 'pending').length}`);
    console.log(`     - Accept√©es : ${requests.filter(r => r.status === 'accepted').length}`);
    console.log(`     - Rejet√©es : ${requests.filter(r => r.status === 'rejected').length}`);
    console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');
    
    console.log('üöÄ Vous pouvez maintenant utiliser votre application !');
    console.log('üí° Conseil : Cr√©ez des comptes utilisateurs via l\'application pour tester compl√®tement.\n');
    
    process.exit(0);
  } catch (error) {
    console.error('\n‚ùå ERREUR lors du seeding:', error);
    console.error('üí° V√©rifiez votre configuration Firebase et vos r√®gles Firestore.\n');
    process.exit(1);
  }
}

// Ex√©cuter le seeding
console.log('\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó');
console.log('‚ïë         SEEDING FIRESTORE - ENCADRINI                 ‚ïë');
console.log('‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n');

seedDatabase();